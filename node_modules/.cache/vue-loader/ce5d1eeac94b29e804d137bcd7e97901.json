{"remainingRequest":"C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\src\\views\\users\\query\\apply\\game.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\src\\views\\users\\query\\apply\\game.vue","mtime":1649063524347},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogIkdhbWUiLA0KDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGlzU2hvdzogZmFsc2UsDQogICAgICAgICAgICBteUFwcGx5OiBbXSwNCiAgICAgICAgICAgIHNob3dsaXN0OiB7fSwNCiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLA0KICAgICAgICAgICAgbGltaXQ6IDUsDQogICAgICAgICAgICB0b3RhbDogMCwNCiAgICAgICAgICAgIHBhZ2VTaXplczpbNSwxMCwxNSwyMF0NCiAgICAgICAgfTsNCiAgICB9LA0KDQogICAgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5nZXRHYW1lQXBwbHlJbmZvKCk7DQogICAgfSwNCg0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgLy8g6I635Y+W55So5oi355Sz6K+35pWw5o2uDQogICAgICAgIGFzeW5jIGdldEdhbWVBcHBseUluZm8oKSB7DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygxMTEpDQogICAgICAgICAgICBjb25zdCB1aWQgPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVpZDsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHVpZCkNCiAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0R2FtZUFwcGx5IiwgdWlkKTsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCkNCiAgICAgICAgICAgIGlmIChyZXN1bHQubWVzc2FnZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzdWx0Lm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLm15QXBwbHkgPSByZXN1bHQuc2xpY2UoDQogICAgICAgICAgICAgICAgICAgICh0aGlzLmN1cnJlbnRQYWdlIC0gMSkgKiB0aGlzLmxpbWl0LA0KICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbWl0ICogdGhpcy5jdXJyZW50UGFnZQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3VsdC5sZW5ndGg7DQogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jdXJyZW50UGFnZSwodGhpcy5jdXJyZW50UGFnZS0xKSp0aGlzLmxpbWl0LHRoaXMubGltaXQsdGhpcy5teUFwcGx5KQ0KICAgICAgICAgICAgICAgIHRoaXMubXlBcHBseS5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGl0ZW0uZ2FtZXRpbWUgPSB0aGlzLiRtb21lbnQoaXRlbS5nYW1ldGltZSkuZm9ybWF0KA0KICAgICAgICAgICAgICAgICAgICAgICAgIllZWVktTU0tREQgSEg6bW06c3MiDQogICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgICAgIGl0ZW0uYXBwdGltZSA9IHRoaXMuJG1vbWVudChpdGVtLmFwcHRpbWUpLmZvcm1hdCgNCiAgICAgICAgICAgICAgICAgICAgICAgICJZWVlZLU1NLUREIEhIOm1tOnNzIg0KICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvLyDlsZXnpLrmjIflrprnlLPor7fnmoTor6bmg4UNCiAgICAgICAgZXhoaWJpdGlvbihyb3cpIHsNCiAgICAgICAgICAgIHRoaXMuc2hvd2xpc3QgPSByb3c7DQogICAgICAgICAgICB0aGlzLmlzU2hvdyA9IHRydWU7DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyb3cpDQogICAgICAgIH0sDQoNCiAgICAgICAgLy8g5Y+W5raI55Sz6K+3DQogICAgICAgIGNhbmNlbChyb3cpIHsNCiAgICAgICAgICAgIHRoaXMuJGNvbWZpcm0oJ+ivt+ehruiupOWPlua2iOivpeadoeeUs+ivtycsJ+aPkOekuicsew0KICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICAgIH0pLnRoZW4oYXN5bmMgKCk9PnsNCiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY2FuY2VsIiwgew0KICAgICAgICAgICAgICAgICAgICBnaWQ6IHJvdy5naWQsDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgaWYgKChyZXN1bHQuY29kZSA9IDIwMCkpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8g5Y+W5raI5oiQ5Yqf6YeN5paw6I635Y+W5pWw5o2uDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0R2FtZUFwcGx5SW5mbygpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7DQogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIuaIkOWKnyIsDQogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5Y+W5raI5oiQ5YqfIiwNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0R2FtZUFwcGx5SW5mbygpDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAi5aSx6LSlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLlj5bmtojlpLHotKUiLA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgDQogICAgICAgIH0sDQoNCiAgICAgICAgLy8g5YiG6aG15ZmoDQogICAgICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7DQogICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gdmFsOw0KICAgICAgICAgICAgdGhpcy5nZXRHYW1lQXBwbHlJbmZvKCk7DQogICAgICAgIH0sDQogICAgICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7DQogICAgICAgICAgICB0aGlzLmxpbWl0ID0gdmFsOw0KICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7DQogICAgICAgICAgICB0aGlzLmdldEdhbWVBcHBseUluZm8oKTsNCiAgICAgICAgfSwNCiAgICB9LA0KfTsNCg=="},{"version":3,"sources":["game.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"game.vue","sourceRoot":"src/views/users/query/apply","sourcesContent":["<template>\r\n    <div>\r\n        <el-table :data=\"myApply\" style=\"width: 100%; margin: 10px\" stripe :default-sort = \"{prop: 'apptime', order: 'descending'}\">\r\n            <el-table-column\r\n                type=\"index\"\r\n                label=\"序号\"\r\n                width=\"80\"\r\n                align=\"center\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"gamename\"\r\n                label=\"活动名称\"\r\n                width=\"width\"\r\n                align=\"center\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"activityType\"\r\n                label=\"活动类型\"\r\n                width=\"width\"\r\n                align=\"center\"\r\n            >\r\n            </el-table-column>\r\n            <!-- <el-table-column\r\n                prop=\"gametime\"\r\n                label=\"活动时间\"\r\n                width=\"width\"\r\n                align=\"center\"\r\n                sortable\r\n            >\r\n            </el-table-column> -->\r\n            <el-table-column\r\n                prop=\"apptime\"\r\n                label=\"申请时间\"\r\n                width=\"width\"\r\n                align=\"center\"\r\n                sortable\r\n            >\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"status\"\r\n                label=\"审批状态\"\r\n                width=\"width\"\r\n                align=\"center\"\r\n            >\r\n                <template slot-scope=\"{row}\">\r\n                    <el-tag type=\"info\" v-if=\"row.status == 0\"\r\n                        >审核中</el-tag\r\n                    >\r\n                    <el-tag type=\"success\" v-if=\"row.status == 1\"\r\n                        >通过</el-tag\r\n                    >\r\n                    <el-tag type=\"danger\" v-if=\"row.status == 2\"\r\n                        >驳回</el-tag\r\n                    >\r\n                    <el-tag type=\"warning\" v-if=\"row.status == 3\"\r\n                        >取消申请</el-tag\r\n                    >\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"prop\" label=\"操作\" width=\"width\">\r\n                <template slot-scope=\"{ row }\">\r\n                    <el-button type=\"warning\" v-if=\"row.status == 0\" @click=\"cancel(row)\">取消申请</el-button >\r\n                    <el-button type=\"info\" @click=\"exhibition(row)\">查看详情</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <pagination\r\n            :currentPage=\"currentPage\"\r\n            :total=\"total\"\r\n            :limit=\"limit\"\r\n            :page-sizes='pageSizes'\r\n            @handleCurrentChange=\"handleCurrentChange\"\r\n            @handleSizeChange=\"handleSizeChange\"\r\n        />\r\n        <el-dialog title=\"详情页\" :model=\"showlist\" :visible.sync=\"isShow\" class=\"dialog\">\r\n            <el-form label-position=\"rigth\" label-width=\"180px\" class=\"form\">\r\n                <el-form-item label=\"活动名称:\">\r\n                    <span><b><h3>{{showlist.gamename}}</h3></b></span>\r\n                </el-form-item>\r\n                <el-form-item label=\"活动类型:\">\r\n                    <span><b><h3>{{showlist.activityType}}</h3></b></span>\r\n                </el-form-item>\r\n                <el-form-item label=\"活动时间:\">\r\n                    <span><b><h3>{{showlist.gametime}}</h3></b></span>\r\n                </el-form-item>\r\n                <el-form-item label=\"活动描述:\">\r\n                    <span><b><h3>{{showlist.description}}</h3></b></span>\r\n                </el-form-item>\r\n                <el-form-item label=\"申请时间:\">\r\n                    <span><b><h3>{{showlist.apptime}}</h3></b></span>\r\n                </el-form-item>\r\n                <el-form-item label=\"审批号:\" v-if=\"showlist.code\" >\r\n                <span><b><h3>{{showlist.code}}</h3></b></span>\r\n                </el-form-item>\r\n                <el-form-item label=\"申请状态\">\r\n                    <el-radio-group v-model=\"showlist.status\" size=\"medium\" disabled >\r\n                        <el-radio label=1 size=\"medium\">通过</el-radio>\r\n                        <el-radio label=0 size=\"medium\">审核中</el-radio>\r\n                        <el-radio label=2 size=\"medium\">驳回</el-radio>\r\n                        <el-radio label=3 size=\"medium\">取消申请</el-radio>\r\n                    </el-radio-group>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\">\r\n                <el-button type=\"primary\" @click=\"isShow = false\">返 回</el-button>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Game\",\r\n\r\n    data() {\r\n        return {\r\n            isShow: false,\r\n            myApply: [],\r\n            showlist: {},\r\n            currentPage: 1,\r\n            limit: 5,\r\n            total: 0,\r\n            pageSizes:[5,10,15,20]\r\n        };\r\n    },\r\n\r\n    mounted() {\r\n        this.getGameApplyInfo();\r\n    },\r\n\r\n    methods: {\r\n        // 获取用户申请数据\r\n        async getGameApplyInfo() {\r\n            // console.log(111)\r\n            const uid = this.$store.state.user.uid;\r\n            // console.log(uid)\r\n            let result = await this.$store.dispatch(\"getGameApply\", uid);\r\n            // console.log(result)\r\n            if (result.message) {\r\n                this.$message.error(result.message);\r\n            } else {\r\n                this.myApply = result.slice(\r\n                    (this.currentPage - 1) * this.limit,\r\n                    this.limit * this.currentPage\r\n                );\r\n                this.total = result.length;\r\n                // console.log(this.currentPage,(this.currentPage-1)*this.limit,this.limit,this.myApply)\r\n                this.myApply.forEach((item) => {\r\n                    item.gametime = this.$moment(item.gametime).format(\r\n                        \"YYYY-MM-DD HH:mm:ss\"\r\n                    );\r\n                    item.apptime = this.$moment(item.apptime).format(\r\n                        \"YYYY-MM-DD HH:mm:ss\"\r\n                    );\r\n                });\r\n            }\r\n        },\r\n        // 展示指定申请的详情\r\n        exhibition(row) {\r\n            this.showlist = row;\r\n            this.isShow = true;\r\n            // console.log(row)\r\n        },\r\n\r\n        // 取消申请\r\n        cancel(row) {\r\n            this.$comfirm('请确认取消该条申请','提示',{\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(async ()=>{\r\n                const result = await this.$store.dispatch(\"cancel\", {\r\n                    gid: row.gid,\r\n                });\r\n                if ((result.code = 200)) {\r\n                    // 取消成功重新获取数据\r\n                    this.getGameApplyInfo();\r\n                    this.$notify.success({\r\n                        title: \"成功\",\r\n                        message: \"取消成功\",\r\n                    });\r\n                    this.getGameApplyInfo()\r\n                } else {\r\n                    this.$notify.error({\r\n                        title: \"失败\",\r\n                        message: \"取消失败\",\r\n                    });\r\n                }\r\n            })\r\n            \r\n        },\r\n\r\n        // 分页器\r\n        handleCurrentChange(val) {\r\n            this.currentPage = val;\r\n            this.getGameApplyInfo();\r\n        },\r\n        handleSizeChange(val) {\r\n            this.limit = val;\r\n            this.currentPage = 1;\r\n            this.getGameApplyInfo();\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.form {\r\n    width: 480px;\r\n    position: relative;\r\n    left: 50%;\r\n    margin-left: -225px;\r\n    top: 40%;\r\n}\r\n.el-radio {\r\n    color: #000000;\r\n    margin-right: 0px;\r\n}\r\nh3{\r\n    margin: 0;\r\n    color: rgb(4, 28, 248);\r\n}\r\n</style>\r\n<style scoped>\r\n.form /deep/ .el-radio {\r\n    /* color: #574e4e!important; */\r\n    margin-right: 5px !important;\r\n}\r\n.form /deep/ .el-radio__input.is-disabled + span.el-radio__label {\r\n    /* color: #574e4e!important; */\r\n    /* font-size: 16px!important; */\r\n    font-weight: bold !important;\r\n}\r\n.form /deep/ .el-radio__input.is-checked + .el-radio__label {\r\n    color: rgb(55, 0, 255) !important;\r\n}\r\n</style>\r\n"]}]}