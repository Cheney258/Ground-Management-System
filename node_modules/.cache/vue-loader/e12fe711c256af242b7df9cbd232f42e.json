{"remainingRequest":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\views\\dashboard\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\views\\dashboard\\index.vue","mtime":1649085322061},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRGFzaGJvYXJkIiwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbIm5hbWUiLCJyb2xlcyJdKSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZXNzYWdlOiAnJywKICAgICAgaXNTaG93OnRydWUsCiAgICAgIGltZ1VybExpc3Q6W10sCiAgICAgIGFwcGx5TmV3czowLAogICAgICByZXBseU5ld3M6MCwKICAgICAgYW5ub3VOZXdzOjAsCiAgICAgIGFubm91aWRMaXN0OltdCiAgICAgIAogICAgfTsKICB9LAogIG1vdW50ZWQgKCkgewogICAgdGhpcy5nZXRJbWFnZSgpCiAgICB0aGlzLmdldE5vUmVhZGVkTWVzc2FnZSgpCiAgICB0aGlzLmdldE5vUmVhZGVkQW5ub3VuKCkKICB9LCAKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5blm77niYflnLDlnYAKICAgIGFzeW5jIGdldEltYWdlKCl7CiAgICAgIGxldCByZXN1bHQgPWF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyL2dldEluZGV4SW1nJykKICAgICAgaWYocmVzdWx0LmNvZGU9PTIwMCl7CiAgICAgICAgdGhpcy5pbWdVcmxMaXN0ID0gcmVzdWx0LmRhdGEKICAgICAgfWVsc2V7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn5pWw5o2u6I635Y+W5aSx6LSlJywKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KQogICAgICB9CiAgICAgIAogICAgfSwKICAgIC8vIOiOt+WPlueUqOaIt+eVmeiogOacquivu+aVsAogICAgYXN5bmMgZ2V0Tm9SZWFkZWRNZXNzYWdlKCl7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLmdldHRlcnMudWlkKQogICAgICBsZXQgdWlkID0gdGhpcy4kc3RvcmUuZ2V0dGVycy51aWQKICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyL2dldE5vUmVhZGVkTWVzc2FnZScse3VpZH0pCiAgICAgIGlmKHJlc3VsdC5jb2RlPT0yMDApewogICAgICAgIHRoaXMucmVwbHlOZXdzID0gcmVzdWx0LmRhdGEubGVuZ3RoCiAgICAgIH1lbHNlewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogJ+aVsOaNruWKoOi9veWksei0pScsCiAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIC8v5p+l55yL5Zue5aSN77ya6Lez6L2s5Yiw55WZ6KiA6aG16Z2iCiAgICB0dXJuVG8odG9QYXRoKXsKICAgICAgaWYodG9QYXRoID09ICd0b01lc3NhZ2UnKXsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTonVXNlck1lc3NhZ2UnfSkKICAgICAgfWVsc2UgaWYodG9QYXRoPT0ndG9Bbm5vdScpewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOid1c2VyQW5ub3VuY2VtZW50JyxxdWVyeToge2lkOnRoaXMuYW5ub3VpZExpc3R9fSkKICAgICAgfQogICAgICAKICAgIH0sCiAgICAvLyDojrflj5bmlrDlhazlkYoKICAgIGFzeW5jIGdldE5vUmVhZGVkQW5ub3VuKCl7CiAgICAgIGxldCB1aWQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLnVpZAogICAgICBsZXQgcmVzdWx0ICA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyL2dldE5vUmVhZGVkQW5ub3VuJyx7dWlkfSkKICAgICAgaWYocmVzdWx0LmNvZGU9PTIwMCl7CiAgICAgICAgcmVzdWx0LmRhdGEuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIHRoaXMuYW5ub3VpZExpc3QucHVzaChpdGVtLmFpZCkKICAgICAgICB9KTsKICAgICAgICB0aGlzLmFubm91TmV3cyA9IHJlc3VsdC5kYXRhLmxlbmd0aAogICAgICB9ZWxzZXsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQpCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn5pWw5o2u5Yqg6L295aSx6LSlJywKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KQogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/dashboard","sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <el-card>\n      <div slot=\"header\" class=\"title\">运动场地管理系统</div>\n      <div>\n        <el-carousel :interval=\"4000\" type=\"card\" height=\"400px\">\n          <el-carousel-item v-for=\"item in imgUrlList\" :key=\"item.id\">\n            <el-image\n              :src=\"item.imgurl\">\n              <!-- 加载失败显示 -->\n              <div slot=\"error\" class=\"image-slot\">\n                <i class=\"el-icon-picture-outline\"></i>\n              </div>\n              </el-image>\n          </el-carousel-item>\n        </el-carousel>\n      </div>\n    </el-card>\n    <el-badge v-if=\"roles=='editor'\" :value=\"applyNews+replyNews+annouNews\" :max=\"99\" class=\"item dropdown\">\n      <el-dropdown  trigger=\"click\" >\n        <span class=\"el-dropdown-link\">\n          <i class=\"el-icon-more icon\"></i>\n        </span>\n        <el-dropdown-menu slot=\"dropdown\">\n          <el-dropdown-item class=\"clearfix\">\n            <el-button type=\"text\" style=\"font-size:16px;font-weight:700;\" @click=\"turnTo('toAnnou')\">公告</el-button>\n            <el-badge class=\"mark\" :value=\"annouNews\" />\n          </el-dropdown-item>\n          <el-dropdown-item class=\"clearfix\">\n            <el-button type=\"text\" style=\"font-size:16px;font-weight:700;\" >申请消息</el-button>\n            <el-badge class=\"mark\" :value=\"applyNews\" />\n          </el-dropdown-item>\n          <el-dropdown-item class=\"clearfix\">\n            <el-button type=\"text\"  style=\"font-size:16px;font-weight:700;\" @click=\"turnTo('toMessage')\">留言回复</el-button>\n            <el-badge class=\"mark\" :value=\"replyNews\" />\n          </el-dropdown-item>\n        </el-dropdown-menu>\n      </el-dropdown>\n    </el-badge>\n    \n\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  name: \"Dashboard\",\n  computed: {\n    ...mapGetters([\"name\",\"roles\"]),\n  },\n  data() {\n    return {\n      message: '',\n      isShow:true,\n      imgUrlList:[],\n      applyNews:0,\n      replyNews:0,\n      annouNews:0,\n      annouidList:[]\n      \n    };\n  },\n  mounted () {\n    this.getImage()\n    this.getNoReadedMessage()\n    this.getNoReadedAnnoun()\n  }, \n  methods: {\n    // 获取图片地址\n    async getImage(){\n      let result =await this.$store.dispatch('user/getIndexImg')\n      if(result.code==200){\n        this.imgUrlList = result.data\n      }else{\n        this.$message({\n          message: '数据获取失败',\n          type: 'error'\n        })\n      }\n      \n    },\n    // 获取用户留言未读数\n    async getNoReadedMessage(){\n      // console.log(this.$store.getters.uid)\n      let uid = this.$store.getters.uid\n      let result = await this.$store.dispatch('user/getNoReadedMessage',{uid})\n      if(result.code==200){\n        this.replyNews = result.data.length\n      }else{\n        this.$message({\n          message: '数据加载失败',\n          type: 'error'\n        })\n      }\n    },\n    //查看回复：跳转到留言页面\n    turnTo(toPath){\n      if(toPath == 'toMessage'){\n        this.$router.push({name:'UserMessage'})\n      }else if(toPath=='toAnnou'){\n        this.$router.push({name:'userAnnouncement',query: {id:this.annouidList}})\n      }\n      \n    },\n    // 获取新公告\n    async getNoReadedAnnoun(){\n      let uid = this.$store.getters.uid\n      let result  = await this.$store.dispatch('user/getNoReadedAnnoun',{uid})\n      if(result.code==200){\n        result.data.forEach(item => {\n          this.annouidList.push(item.aid)\n        });\n        this.annouNews = result.data.length\n      }else{\n        // console.log(result)\n        this.$message({\n          message: '数据加载失败',\n          type: 'error'\n        })\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.title {\n  text-align: center;\n  font-size: 28px;\n  font-weight: bold;\n}\n\n.el-carousel__item h3 {\n  color: #475669;\n  font-size: 14px;\n  opacity: 0.75;\n  line-height: 200px;\n  margin: 0;\n}\n.item {\n  margin-top: 10px;\n  margin-right: 40px;\n}\n.el-carousel__item:nth-child(2n) {\n  background-color: #99a9bf;\n}\n\n.el-carousel__item:nth-child(2n + 1) {\n  background-color: #d3dce6;\n}\n.dropdown {\n  width: 50px;\n  height: 50px;\n  text-align: center;\n  line-height: 50px;\n  background-color: #99ccee67;\n  position: absolute;\n  top: 70%;\n  right: 200px;\n  border: #00060e 25px;\n  border-radius: 25px;\n  box-shadow:5px 5px 5px 0 rgb(48, 65, 86);\n  backdrop-filter: 5px;\n}\n.icon{\n  width: 50px;\n  height: 50px;\n  font-size: 20px;\n  text-align: center;\n  line-height: 50px;\n  border-radius: 25px;\n}\n</style>\n"]}]}