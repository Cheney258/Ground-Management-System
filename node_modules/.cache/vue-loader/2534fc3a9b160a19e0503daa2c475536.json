{"remainingRequest":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\views\\users\\query\\apply\\equip.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\views\\users\\query\\apply\\equip.vue","mtime":1647241996765},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJFcXVpcCIsDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaXNTaG93OiBmYWxzZSwNCiAgICAgIG15QXBwbHk6IFtdLA0KICAgICAgc2hvd2xpc3Q6IHt9LA0KICAgIH07DQogIH0sDQoNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmdldEVxdWlwQXBwbHlJbmZvKCk7DQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIC8vIOiOt+WPlueUqOaIt+eUs+ivt+aVsOaNrg0KICAgIGFzeW5jIGdldEVxdWlwQXBwbHlJbmZvKCkgew0KICAgICAgLy8gY29uc29sZS5sb2codGhpcy4kc3RvcmUpDQogICAgICBjb25zdCB1aWQgPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVpZDsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHVpZCkNCiAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0RXF1aXBBcHBseSIsIHVpZCk7DQogICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQpDQogICAgICBpZiAocmVzdWx0Lm1lc3NhZ2UpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXN1bHQubWVzc2FnZSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLm15QXBwbHkgPSByZXN1bHQ7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubXlBcHBseSkNCiAgICAgICAgdGhpcy5teUFwcGx5LmZvckVhY2goKGl0ZW0pID0+IHsNCiAgICAgICAgICBpdGVtLmdhbWV0aW1lID0gdGhpcy4kbW9tZW50KGl0ZW0uZ2FtZXRpbWUpLmZvcm1hdCgNCiAgICAgICAgICAgICJZWVlZLU1NLUREIEhIOm1tOnNzIg0KICAgICAgICAgICk7DQogICAgICAgICAgaXRlbS5hcHB0aW1lID0gdGhpcy4kbW9tZW50KGl0ZW0uYXBwdGltZSkuZm9ybWF0KA0KICAgICAgICAgICAgIllZWVktTU0tREQgSEg6bW06c3MiDQogICAgICAgICAgKTsNCiAgICAgICAgICBpdGVtLmJhY2t0aW1lID0gdGhpcy4kbW9tZW50KGl0ZW0uYmFja3RpbWUpLmZvcm1hdCgNCiAgICAgICAgICAgICJZWVlZLU1NLUREIEhIOm1tOnNzIg0KICAgICAgICAgICk7DQogICAgICAgICAgc3dpdGNoIChpdGVtLnN0YXR1cykgew0KICAgICAgICAgICAgY2FzZSAwOg0KICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnMTEnKQ0KICAgICAgICAgICAgICBpdGVtLnN0YXR1cyA9ICLlrqHmoLjkuK0iOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMToNCiAgICAgICAgICAgICAgaXRlbS5zdGF0dXMgPSAi6YCa6L+HIjsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDI6DQogICAgICAgICAgICAgIGl0ZW0uc3RhdHVzID0gIumps+WbniI7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAzOg0KICAgICAgICAgICAgICBpdGVtLnN0YXR1cyA9ICLlj5bmtojnlLPor7ciOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgNDoNCiAgICAgICAgICAgICAgaXRlbS5zdGF0dXMgPSAi5pyq5aaC5pyf5b2S6L+YIjsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpdGVtLnN0YXR1cykNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgICANCiAgICB9LA0KICAgIC8vIOWxleekuuaMh+WumueUs+ivt+eahOivpuaDhQ0KICAgIGV4aGliaXRpb24ocm93KSB7DQogICAgICB0aGlzLnNob3dsaXN0ID0gcm93Ow0KICAgICAgdGhpcy5pc1Nob3cgPSB0cnVlOw0KICAgICAgLy8gY29uc29sZS5sb2cocm93KQ0KICAgIH0sDQogICAgLy8g5Y+W5raI55Sz6K+3DQogICAgYXN5bmMgY2FuY2VsKHJvdyl7DQogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2FuY2VsJyx7cmlkOnJvdy5yaWR9KQ0KICAgICAgaWYocmVzdWx0LmNvZGUgPSAyMDApew0KICAgICAgICB0aGlzLmdldEVxdWlwQXBwbHlJbmZvKCk7DQogICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsNCiAgICAgICAgICB0aXRsZTon5oiQ5YqfJywNCiAgICAgICAgICBtZXNzYWdlOiflj5bmtojmiJDlip8nDQogICAgICAgIH0pDQogICAgICB9ZWxzZXsNCiAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsNCiAgICAgICAgICB0aXRsZTon5aSx6LSlJywNCiAgICAgICAgICBtZXNzYWdlOiflj5bmtojlpLHotKUnDQogICAgICAgIH0pDQogICAgICB9DQogICAgfQ0KICB9LA0KfTsNCg=="},{"version":3,"sources":["equip.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"equip.vue","sourceRoot":"src/views/users/query/apply","sourcesContent":["<template>\r\n  <div>\r\n    <el-table :data=\"myApply\" style=\"width: 100%; margin: 10px\">\r\n      <el-table-column type=\"index\" label=\"序号\" width=\"80\" align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"type\"\r\n        label=\"器材类型\"\r\n        width=\"width\"\r\n        align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"amount\"\r\n        label=\"数量\"\r\n        width=\"width\"\r\n        align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"gametime\"\r\n        label=\"使用时间\"\r\n        width=\"width\"\r\n        align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"status\"\r\n        label=\"审批状态\"\r\n        width=\"width\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-tag type=\"info\" v-if=\"scope.row.status == '审核中'\" >审核中</el-tag>\r\n          <el-tag type=\"success\" v-if=\"scope.row.status == '通过'\">通过</el-tag>\r\n          <el-tag type=\"danger\" v-if=\"scope.row.status == '驳回'\">驳回</el-tag>\r\n          <el-tag type=\"warning\" v-if=\"scope.row.status == '取消申请'\">取消申请</el-tag>\r\n          <el-tag type=\"danger\" v-if=\"scope.row.status == '未如期归还'\">未如期归还</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"prop\" label=\"操作\" width=\"width\">\r\n        <template slot-scope=\"{ row }\">\r\n          <el-button @click=\"exhibition(row)\">详情</el-button>\r\n          <el-button type=\"warning\" v-if=\"row.status == '审核中'\" @click=\"cancel(row)\">取消申请</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-dialog\r\n      title=\"详情页\"\r\n      :model=\"showlist\"\r\n      :visible.sync=\"isShow\"\r\n      class=\"dialog\"\r\n    >\r\n      <el-form label-position=\"rigth\" label-width=\"100px\" class=\"form\">\r\n        <el-form-item label=\"租用人:\">\r\n          <el-input\r\n            v-model=\"showlist.username\"\r\n            readonly=\"readonly\"\r\n            style=\"width: 180px;\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"学号:\">\r\n          <el-input\r\n            v-model=\"showlist.xuehao\"\r\n            readonly=\"readonly\"\r\n            style=\"width: 180px;\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <!-- <el-form-item label=\"活动ID:\" >\r\n                            <el-input v-model=\"showlist.contest_id\" readonly=\"readonly\" class=\"input\"></el-input>\r\n                        </el-form-item> -->\r\n        <!-- <el-form-item label=\"活动地点:\" >\r\n                            <el-input v-model=\"showlist.position\" readonly=\"readonly\" class=\"input\"></el-input>\r\n                        </el-form-item> -->\r\n        <el-form-item label=\"联系电话:\">\r\n          <el-input\r\n            v-model=\"showlist.phone\"\r\n            readonly=\"readonly\"\r\n            style=\"width: 180px;\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"器材:\">\r\n          <el-input\r\n            v-model=\"showlist.type\"\r\n            readonly=\"readonly\"\r\n            style=\"width: 180px;\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"租用数量:\">\r\n          <el-input\r\n            v-model=\"showlist.amount\"\r\n            readonly=\"readonly\"\r\n            style=\"width: 180px;\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"申请时间:\"  class=\"input\">\r\n          <el-input v-model=\"showlist.apptime\" readonly=\"readonly\" style=\"width: 180px;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"归还时间:\" class=\"input\">\r\n          <el-input v-model=\"showlist.backtime\" readonly=\"readonly\" style=\"width: 180px;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"申请状态\">\r\n          <el-radio-group v-model=\"showlist.status\" size=\"medium\" disabled>\r\n            <el-radio label=\"通过\" size=\"medium\" ></el-radio>\r\n            <el-radio label=\"审核中\" size=\"medium\" ></el-radio>\r\n            <el-radio label=\"驳回\" size=\"medium\" ></el-radio>\r\n            <el-radio label=\"取消申请\" size=\"medium\" ></el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button type=\"primary\" @click=\"isShow = false\">返 回</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Equip\",\r\n\r\n  data() {\r\n    return {\r\n      isShow: false,\r\n      myApply: [],\r\n      showlist: {},\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.getEquipApplyInfo();\r\n  },\r\n\r\n  methods: {\r\n    // 获取用户申请数据\r\n    async getEquipApplyInfo() {\r\n      // console.log(this.$store)\r\n      const uid = this.$store.state.user.uid;\r\n      // console.log(uid)\r\n      let result = await this.$store.dispatch(\"getEquipApply\", uid);\r\n      // console.log(result)\r\n      if (result.message) {\r\n        this.$message.error(result.message);\r\n      } else {\r\n        this.myApply = result;\r\n        // console.log(this.myApply)\r\n        this.myApply.forEach((item) => {\r\n          item.gametime = this.$moment(item.gametime).format(\r\n            \"YYYY-MM-DD HH:mm:ss\"\r\n          );\r\n          item.apptime = this.$moment(item.apptime).format(\r\n            \"YYYY-MM-DD HH:mm:ss\"\r\n          );\r\n          item.backtime = this.$moment(item.backtime).format(\r\n            \"YYYY-MM-DD HH:mm:ss\"\r\n          );\r\n          switch (item.status) {\r\n            case 0:\r\n              // console.log('11')\r\n              item.status = \"审核中\";\r\n              break;\r\n            case 1:\r\n              item.status = \"通过\";\r\n              break;\r\n            case 2:\r\n              item.status = \"驳回\";\r\n              break;\r\n            case 3:\r\n              item.status = \"取消申请\";\r\n              break;\r\n            case 4:\r\n              item.status = \"未如期归还\";\r\n              break;\r\n          }\r\n              // console.log(item.status)\r\n        });\r\n      }\r\n      \r\n    },\r\n    // 展示指定申请的详情\r\n    exhibition(row) {\r\n      this.showlist = row;\r\n      this.isShow = true;\r\n      // console.log(row)\r\n    },\r\n    // 取消申请\r\n    async cancel(row){\r\n      const result = await this.$store.dispatch('cancel',{rid:row.rid})\r\n      if(result.code = 200){\r\n        this.getEquipApplyInfo();\r\n        this.$notify.success({\r\n          title:'成功',\r\n          message:'取消成功'\r\n        })\r\n      }else{\r\n        this.$notify.error({\r\n          title:'失败',\r\n          message:'取消失败'\r\n        })\r\n      }\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.form {\r\n  width: 480px;\r\n  position: relative;\r\n  left: 50%;\r\n  margin-left: -225px;\r\n  top: 40%;\r\n}\r\n.el-radio {\r\n    color: #000000;\r\n    margin-right: 0px;\r\n}\r\n</style>\r\n"]}]}