{"remainingRequest":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\views\\admin\\Field\\Field_info.vue?vue&type=style&index=0&id=ab6b22bc&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\views\\admin\\Field\\Field_info.vue","mtime":1648979055128},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5zZWFyY2ggew0KICB3aWR0aDogMjAwcHg7DQogIGJvcmRlci1yYWRpdXM6IDMwcHg7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgcmlnaHQ6IC0xMDAwcHg7DQp9DQouYnRuIHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICByaWdodDogLTEwMjBweDsNCn0NCi5jaGFyZ2VTaG93IHsNCiAgbWFyZ2luLWxlZnQ6IDI1JTsNCiAgd2lkdGg6IDUwJTsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAvLyBmb250LXNpemU6MjBweDsNCiAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogIGNvbG9yOiAjNDA5ZWZmOw0KICBtYXJnaW4tYm90dG9tOiAwcHg7DQp9DQouY2hhcmdlRm9ybSB7DQogIHRleHQtYWxpZ246IGxlZnQ7DQogIC8vICAgZm9udC1zaXplOjE3cHg7DQogIGZvbnQtd2VpZ2h0OiBub3JtYWw7DQogIGJvcmRlci10b3Atd2lkdGg6IDRweDsNCiAgYm9yZGVyLXRvcC1zdHlsZTogc29saWQ7DQogIGJvcmRlci10b3AtY29sb3I6ICM0MDllZmY7DQp9DQouYWRkVmVudWVTaG93IHsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBmb250LXdlaWdodDogYm9sZDsNCiAgbWFyZ2luLWJvdHRvbTogMHB4Ow0KfQ0K"},{"version":3,"sources":["Field_info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Field_info.vue","sourceRoot":"src/views/admin/Field","sourcesContent":["<template>\r\n  <div>\r\n    <el-card>\r\n      <div slot=\"header\">\r\n        <el-button type=\"primary\" style=\"margin-left: 50px\" @click=\"addVenue\"\r\n          >+ 新增</el-button\r\n        >\r\n        <el-input\r\n          v-model=\"search\"\r\n          placeholder=\"请输入关键字...\"\r\n          class=\"search\"\r\n          @change=\"SearchList\"\r\n          clearable\r\n        ></el-input>\r\n        <el-button type=\"primary\" class=\"btn\" @click=\"toSearch\">搜索</el-button>\r\n      </div>\r\n      <div>\r\n        <el-table :data=\"fieldInfo\" style=\"width: 100%\" stripe>\r\n          <el-table-column\r\n            prop=\"pid\"\r\n            label=\"场地ID\"\r\n            width=\"width\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"type\"\r\n            label=\"场地类型\"\r\n            width=\"width\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"position\"\r\n            label=\"场地位置\"\r\n            width=\"width\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <!-- <el-table-column\r\n            prop=\"usetime\"\r\n            label=\"可预约时间\"\r\n            width=\"width\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column> -->\r\n          <el-table-column\r\n            prop=\"name\"\r\n            label=\"场地管理员\"\r\n            width=\"width\"\r\n            align=\"center\"\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <el-button type=\"text\" @click=\"Peopledetails(row)\">{{\r\n                row.name\r\n              }}</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"status\"\r\n            label=\"运行状态\"\r\n            width=\"width\"\r\n            align=\"center\"\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <el-tag type=\"success\" v-if=\"row.status == 0\">运行中</el-tag>\r\n              <el-tag type=\"warning\" v-if=\"row.status == 1\">暂停运行</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"prop\" label=\"操作\" width=\"300\" align=\"center\">\r\n            <template slot-scope=\"{ row }\">\r\n              <el-button type=\"primary\" @click=\"edit(row)\">修改</el-button>\r\n              <el-button type=\"danger\" @click=\"deletes(row)\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      <pagination \r\n        v-show=\"flag\"\r\n        :currentPage=\"currentPage\" \r\n        :total=\"total\" \r\n        :limit=\"limit\" \r\n        :page-sizes='pageSizes'\r\n        @handleCurrentChange=\"handleCurrentChange\" \r\n        @handleSizeChange=\"handleSizeChange\"/>\r\n    </el-card>\r\n\r\n    <!-- 点击负责人姓名显示信息 -->\r\n    <el-dialog title=\"负责人信息\" :visible.sync=\"details\" class=\"chargeShow\">\r\n      <!-- <span>负责人信息</span> -->\r\n      <!-- 内容主体区域 -->\r\n      <el-form\r\n        ref=\"addFormRef\"\r\n        :model=\"ChargePersonInfo\"\r\n        label-width=\"200px\"\r\n        class=\"chargeForm\"\r\n      >\r\n        <!-- 负责人 -->\r\n        <el-form-item label=\"负责人:\" style=\"margin-top: 20px\">\r\n          {{ ChargePersonInfo.name }}\r\n        </el-form-item>\r\n        <!-- 负责场地 -->\r\n        <el-form-item label=\"负责场地:\">\r\n          {{ ChargePersonInfo.position }}\r\n        </el-form-item>\r\n        <!-- 所属单位 -->\r\n        <el-form-item label=\"所属单位:\">\r\n          {{ ChargePersonInfo.unit }}\r\n        </el-form-item>\r\n        <!-- 工作时间 -->\r\n        <el-form-item label=\"工作时间:\">\r\n          {{ ChargePersonInfo.worktime }}\r\n        </el-form-item>\r\n        <!-- 联系电话 -->\r\n        <el-form-item label=\"联系电话:\">\r\n          {{ ChargePersonInfo.phone }}\r\n        </el-form-item>\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"details = false\"\r\n          style=\"margin-left: 40%\"\r\n          >确 定</el-button\r\n        >\r\n      </el-form>\r\n    </el-dialog>\r\n\r\n    <!-- 新建场地对话框 -->\r\n    <el-dialog\r\n      :title=\"newVenue.pid == '' ? '新增场地' : '修改场地信息'\"\r\n      ref=\"dialog\"\r\n      :visible.sync=\"isShow\"\r\n      width=\"30%\"\r\n      class=\"addVenueShow\"\r\n    >\r\n      <!-- 内容主体区域 -->\r\n      <el-form\r\n        :model=\"newVenue\"\r\n        :rules=\"addFormRules\"\r\n        ref=\"addFormRef\"\r\n        label-width=\"120px\"\r\n        class=\"addVenueForm\"\r\n      >\r\n        <!-- 选择场地类别 -->\r\n        <el-form-item label=\"场地ID\" prop=\"pid\" style=\"margin-top: 20px\">\r\n          <el-input\r\n            v-model=\"newVenue.pid\"\r\n            placeholder=\"\"\r\n            style=\"width: 348px\"\r\n          ></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"新增类型\" v-if=\"newVenue.add\">\r\n          <el-switch v-model=\"newtype\" style=\"margin-left: -290px\"></el-switch>\r\n        </el-form-item>\r\n\r\n        <el-form-item\r\n          label=\"场地类别\"\r\n          v-if=\"newtype == false\"\r\n          prop=\"tid\"\r\n          style=\"margin-top: 20px\"\r\n        >\r\n          <el-select\r\n            v-model=\"newVenue.tid\"\r\n            v-if=\"newtype == false\"\r\n            placeholder=\"请选择场地类型\"\r\n            style=\"width: 85%\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item, index) in venueTypeList\"\r\n              :key=\"index\"\r\n              :label=\"item.type\"\r\n              :value=\"item.tid\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item\r\n          label=\"场地类别\"\r\n          v-else\r\n          prop=\"type\"\r\n          style=\"margin-top: 20px\"\r\n        >\r\n          <el-input\r\n            v-model=\"newVenue.type\"\r\n            placeholder=\"请输入新增类型名称\"\r\n            style=\"width: 348px\"\r\n          ></el-input>\r\n        </el-form-item>\r\n\r\n        <!-- 选择场地位置 -->\r\n        <el-form-item label=\"场地位置\" prop=\"position\">\r\n          <el-input\r\n            v-model=\"newVenue.position\"\r\n            placeholder=\"\"\r\n            style=\"width: 348px\"\r\n          ></el-input>\r\n        </el-form-item>\r\n\r\n        <!-- 选择场地负责人 -->\r\n        <el-form-item label=\"场地负责人\" prop=\"cid\">\r\n          <el-select\r\n            v-model=\"newVenue.cid\"\r\n            placeholder=\"请指定负责人\"\r\n            style=\"width: 85%\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item, index) in venueChargeList\"\r\n              :key=\"index\"\r\n              :label=\"item.name + '-' + item.phone\"\r\n              :value=\"item.cid\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"场地状态\" prop=\"status\">\r\n          <el-radio-group v-model=\"newVenue.status\">\r\n            <el-radio :label=\"0\">运行中</el-radio>\r\n            <el-radio :label=\"1\">暂停运行</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n      </el-form>\r\n      <!-- 内容底部区域 -->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"isShow = false\" style=\"margin-left: 30px\"\r\n          >取 消</el-button\r\n        >\r\n        <el-button type=\"primary\" v-if=\"this.newVenue.add\" @click=\"submit\"\r\n          >提交</el-button\r\n        >\r\n        <el-button type=\"primary\" v-else @click=\"update\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"FieldInfo\",\r\n\r\n  data() {\r\n    return {\r\n      search: \"\",\r\n      fieldInfo: [],\r\n      newtype: false,\r\n      isShow: false,\r\n      flag:true,\r\n      data:[],\r\n      details: false,\r\n      result1: [],\r\n      currentPage: 1,\r\n      limit: 5,\r\n      total: 0,\r\n      pageSizes:[5,10,15,20],\r\n      ChargePersonInfo: {},\r\n      venueTypeList: [],\r\n      positionList: [],\r\n      venueChargeList: [],\r\n      newVenue: {\r\n        pid: \"\",\r\n        type: \"\",\r\n        tid: \"\",\r\n        position: \"\",\r\n        cid: \"\",\r\n        status: 0,\r\n      },\r\n\r\n      addFormRules: {\r\n        type: [{ required: true, message: \"请输入场地类型\", trigger: \"blur\" }],\r\n        pid: [{ required: true, message: \"请输入场地ID\", trigger: \"blur\" }],\r\n        position: [{ required: true, message: \"请选择场地位置\", trigger: \"blur\" }],\r\n        cid: [{ required: true, message: \"请指定负责人\", trigger: \"blur\" }],\r\n        tid: [{ required: true, message: \"请选择场地类型\", trigger: \"blur\" }],\r\n      },\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.getAllVenueInfo();\r\n  },\r\n\r\n  methods: {\r\n    // 获取场地信息\r\n    async getAllVenueInfo() {\r\n      let result = await this.$store.dispatch(\"getAllVenueInfo\");\r\n      if (result.code == 200) {\r\n        this.fieldInfo = []\r\n        this.data = result.data\r\n        this.fieldInfo = result.data.slice((this.currentPage-1)*this.limit,this.limit*this.currentPage);\r\n          this.total = result.data.length\r\n      } else this.$message.error(result.message);\r\n      this.result1 = await this.$store.dispatch(\"getAboutVenInfo\");\r\n      this.venueTypeList = this.result1[0];\r\n      this.positionList = this.result1[1];\r\n      this.venueChargeList = this.result1[2];\r\n    },\r\n    Peopledetails(row) {\r\n      this.details = true;\r\n      this.ChargePersonInfo = row;\r\n    },\r\n    edit(row) {\r\n      this.isShow = true;\r\n      // console.log(row,this.newVenue)\r\n      Object.assign(this.newVenue, row);\r\n      // console.log(this.newVenue)\r\n    },\r\n    update() {\r\n      delete this.newVenue.add;\r\n      this.$comfirm(\"确认更改该场地信息？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(async () => {\r\n        // console.log(this.newVenue)\r\n        let result = await this.$store.dispatch(\r\n          \"updateVenueInfo\",\r\n          this.newVenue\r\n        );\r\n        if (result.code == 200) {\r\n          this.$notify.success({ title: \"信息更新成功\" });\r\n          this.getAllVenueInfo();\r\n          this.isShow = false;\r\n        } else {\r\n          this.$notify.error({ title: \"信息更新失败\" });\r\n          this.isShow = false;\r\n        }\r\n      });\r\n    },\r\n    // 新增\r\n    addVenue() {\r\n      this.isShow = true;\r\n      // 对象属性值置空\r\n      Object.keys(this.newVenue).forEach((key) => (this.newVenue[key] = \"\"));\r\n      this.newVenue.add = true;\r\n    },\r\n    // 提交\r\n    submit() {\r\n      this.$refs.addFormRef.validate((valid) => {\r\n        if (valid) {;\r\n          // console.log(this.newVenue)\r\n          this.$comfirm(\"请确认提交\", \"提示\", {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"warning\",\r\n          }).then(async () => {\r\n            let result = await this.$store.dispatch(\"addVenue\", this.newVenue);\r\n            if(result.code==200){\r\n              this.$notify.success({title:'添加成功'})\r\n              this.getAllVenueInfo()\r\n              this.isShow = false\r\n            }else{\r\n              this.$notify.error({title:'添加失败'})\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    // 删除\r\n    async deletes(row){\r\n      this.$comfirm('确认删除该场地信息？','提示',{\r\n        confirmButtonText:'确定',\r\n        cancelButtonText:'取消',\r\n        type:'warning'\r\n      }).then(async ()=>{\r\n        const result = await this.$store.dispatch('deleteVenue',{id:row.id})\r\n        if(result.code==200){\r\n          this.$notify.success({title:'删除成功'})\r\n          this.getAllVenueInfo()\r\n        }else{\r\n          this.$message.error(result.message)\r\n        }\r\n      })\r\n    },\r\n    // 分页器\r\n        handleCurrentChange(val) {\r\n            this.currentPage = val;\r\n            this.getAllVenueInfo();\r\n        },\r\n        handleSizeChange(val) {\r\n            this.limit = val\r\n            this.currentPage = 1;\r\n            this.getAllVenueInfo();\r\n        },\r\n    \r\n    // 搜索\r\n    toSearch() {\r\n      if (this.search) {\r\n        let that = this\r\n        this.flag = false\r\n        this.fieldInfo = []\r\n        this.fieldInfo = this.data.filter(item => {\r\n          return Object.keys(item).some(function (key) {\r\n            //搜索所有的内容\r\n            return String(item[key]).toLowerCase().indexOf(that.search) > -1;\r\n            //只搜索问题内容（某一个key）\r\n            // return (\r\n            //   String(product[\"questions\"]).toLowerCase().indexOf(search) > -1\r\n            // );\r\n          });\r\n        });\r\n        // return searchVal;\r\n        // console.log(this.showList)\r\n      } else {\r\n        this.flag = true\r\n        this.getAllVenueInfo();\r\n      }\r\n    },\r\n    SearchList(){\r\n      if(!this.search){\r\n        this.getAllVenueInfo()\r\n        this.flag = true\r\n      }\r\n    }\r\n  },\r\n   \r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.search {\r\n  width: 200px;\r\n  border-radius: 30px;\r\n  position: relative;\r\n  right: -1000px;\r\n}\r\n.btn {\r\n  position: relative;\r\n  right: -1020px;\r\n}\r\n.chargeShow {\r\n  margin-left: 25%;\r\n  width: 50%;\r\n  text-align: center;\r\n  // font-size:20px;\r\n  font-weight: bold;\r\n  color: #409eff;\r\n  margin-bottom: 0px;\r\n}\r\n.chargeForm {\r\n  text-align: left;\r\n  //   font-size:17px;\r\n  font-weight: normal;\r\n  border-top-width: 4px;\r\n  border-top-style: solid;\r\n  border-top-color: #409eff;\r\n}\r\n.addVenueShow {\r\n  text-align: center;\r\n  font-weight: bold;\r\n  margin-bottom: 0px;\r\n}\r\n</style>\r\n"]}]}