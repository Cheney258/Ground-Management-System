{"remainingRequest":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\components\\upload\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\components\\upload\\index.vue","mtime":1648877267576},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJVcGxvYWQiLA0KICBwcm9wczogew0KICAgIGFjY2VwdDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogImltYWdlLyoiDQogICAgfSwNCiAgICBsaW1pdDogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgZGVmYXVsdDogNQ0KICAgIH0sDQogICAgbmFtZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogImZpbGUiDQogICAgfSwNCiAgICBhdXRvVXBsb2FkOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UNCiAgICB9LA0KICAgIGZpbGVMaXN0OiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiBbXTsNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAiIiwNCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgZGlzYWJsZWQ6IGZhbHNlLA0KICAgICAgaXNVcGxvYWQ6IGZhbHNlLA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBoYW5kbGVDaGFuZ2UoZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIC8vIOWIpOaWreS4iuS8oOaWh+S7tuaYr+WQpui+vuWIsOmZkOWItg0KICAgICAgdGhpcy5pc1VwbG9hZCA9IGZpbGVMaXN0Lmxlbmd0aCA+PSB0aGlzLmxpbWl0DQogICAgICAvLyDnlLHkuo7orr7nva7oh6rliqjkuIrkvKDkuLpmYWxzZSxiZWZvcmUtdXBsb2Fk6ZKp5a2Q5aSx5pWI77yM5omA5Lul5Zyob24tY2hhbmdl5Lit5qOA6aqM5paH5Lu25piv5ZCm56ym5ZCI6KaB5rGCDQogICAgICBjb25zdCBpc0pQRyA9IH5bImltYWdlL2pwZWciLCAiaW1hZ2UvcG5nIl0uaW5kZXhPZihmaWxlLnJhdy50eXBlKTsNCiAgICAgIGNvbnN0IGlzTHQyTSA9IGZpbGUucmF3LnNpemUgLyAxMDI0IC8gMTAyNCA8IDI7DQogICAgICBpZiAoIWlzSlBHKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4iuS8oOWbvueJh+WPquiDveaYryBqcGcg5qC85byPISIpDQogICAgICB9DQogICAgICBpZiAoIWlzTHQyTSkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLkuIrkvKDlpLTlg4/lm77niYflpKflsI/kuI3og73otoXov4cgMk1CISIpDQogICAgICB9IA0KICAgICAgaWYoIWlzSlBHIHx8ICFpc0x0Mk0pew0KICAgICAgLy8g5LiN56ym5ZCI55u05o6l5Yig6Zmk6K+l5paH5Lu2DQogICAgICAgIHRoaXMuaGFuZGxlUmVtb3ZlKGZpbGUpDQogICAgICB9DQogICAgfSwNCiAgICAvLyDliKDpmaTlm77niYcNCiAgICBoYW5kbGVSZW1vdmUoZmlsZSkgew0KICAgICAgbGV0IGZpbGVMaXN0ID0gdGhpcy4kcmVmcy51cGxvYWQudXBsb2FkRmlsZXM7DQogICAgICBsZXQgaW5kZXggPSBmaWxlTGlzdC5maW5kSW5kZXgoZmlsZUl0ZW0gPT4gew0KICAgICAgICByZXR1cm4gZmlsZUl0ZW0udWlkID09PSBmaWxlLnVpZDsNCiAgICAgIH0pOw0KICAgICAgZmlsZUxpc3Quc3BsaWNlKGluZGV4LCAxKTsNCiAgICAgIC8vIOeUseS6juWIoOmZpOe7hOS7tuacieWKqOeUu+WKn+iDve+8jOaJgOS7peiuvue9ruS4quW7tui/n+aYvuekug0KICAgICAgc2V0VGltZW91dCgoKT0+ew0KICAgICAgICB0aGlzLmlzVXBsb2FkID0gZmFsc2UNCiAgICAgIH0sMTAwMCkNCiAgICB9LA0KICAgIC8vIOmihOiniOWbvueJhw0KICAgIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldyhmaWxlKSB7DQogICAgICB0aGlzLmRpYWxvZ0ltYWdlVXJsID0gZmlsZS51cmw7DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOw0KICAgIH0sDQogICAgLy8g5paH5Lu26LaF5Ye66ZmQ5Yi255qE5o+Q56S6DQogICAgaGFuZGxlRXhjZWVkKGZpbGUsIGZpbGVMaXN0KSB7DQogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmlofku7bkuKrmlbDotoXlh7rpmZDliLYiKTsNCiAgICB9LA0KICAgIHVwbG9hZCgpIHsNCiAgICAgIC8vIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7DQogICAgICAvLyBjb25zdCBmaWxlID0gdGhpcy4kcmVmcy51cGxvYWRJbWcuJHJlZnMudXBsb2FkLnVwbG9hZEZpbGVzOw0KICAgICAgLy8gY29uc3QgaGVhZGVyQ29uZmlnID0gew0KICAgICAgLy8gICBoZWFkZXJzOiB7ICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIgfQ0KICAgICAgLy8gfTsNCiAgICAgIC8vIGZpbGUuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgIC8vICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlIiwgaXRlbS5yYXcpDQogICAgICAvLyB9KTsNCiAgICAgIC8vIGxldCB7ZGF0YTpyZXN9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCJ1cGxvYWQvdXBsb2FkVGVzdCIsIGZvcm1EYXRhLCBoZWFkZXJDb25maWcpOw0KICAgICAgLy8gY29uc29sZS5sb2cocmVzLCdyZXMnKTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/upload","sourcesContent":["<template>\r\n  <div class=\"upload\">\r\n    <el-upload\r\n      action=\"\"\r\n      :class=\"{hide:isUpload}\"\r\n      :auto-upload=\"autoUpload\"\r\n      :http-request=\"upload\"\r\n      list-type=\"picture-card\"\r\n      multiple\r\n      :limit=\"limit\"\r\n      :file-list=\"fileList\"\r\n      :accept=\"accept\"\r\n      ref=\"upload\"\r\n      :name=\"name\"\r\n      :on-change=\"handleChange\"\r\n      :on-exceed=\"handleExceed\"\r\n    >\r\n      <i slot=\"default\" class=\"el-icon-plus\"></i>\r\n      <div slot=\"file\" slot-scope=\"{ file }\">\r\n        <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\" />\r\n        <span class=\"el-upload-list__item-actions\">\r\n          <span\r\n            class=\"el-upload-list__item-preview\"\r\n            @click=\"handlePictureCardPreview(file)\"\r\n          >\r\n            <i class=\"el-icon-zoom-in\"></i>\r\n          </span>\r\n          <span\r\n            v-if=\"!disabled\"\r\n            class=\"el-upload-list__item-delete\"\r\n            @click=\"handleRemove(file)\"\r\n          >\r\n            <i class=\"el-icon-delete\"></i>\r\n          </span>\r\n        </span>\r\n      </div>\r\n    </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\">\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Upload\",\r\n  props: {\r\n    accept: {\r\n      type: String,\r\n      default: \"image/*\"\r\n    },\r\n    limit: {\r\n      type: Number,\r\n      default: 5\r\n    },\r\n    name: {\r\n      type: String,\r\n      default: \"file\"\r\n    },\r\n    autoUpload: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    fileList: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      dialogImageUrl: \"\",\r\n      dialogVisible: false,\r\n      disabled: false,\r\n      isUpload: false,\r\n    };\r\n  },\r\n  methods: {\r\n    handleChange(file, fileList) {\r\n      // 判断上传文件是否达到限制\r\n      this.isUpload = fileList.length >= this.limit\r\n      // 由于设置自动上传为false,before-upload钩子失效，所以在on-change中检验文件是否符合要求\r\n      const isJPG = ~[\"image/jpeg\", \"image/png\"].indexOf(file.raw.type);\r\n      const isLt2M = file.raw.size / 1024 / 1024 < 2;\r\n      if (!isJPG) {\r\n        this.$message.error(\"上传图片只能是 jpg 格式!\")\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\")\r\n      } \r\n      if(!isJPG || !isLt2M){\r\n      // 不符合直接删除该文件\r\n        this.handleRemove(file)\r\n      }\r\n    },\r\n    // 删除图片\r\n    handleRemove(file) {\r\n      let fileList = this.$refs.upload.uploadFiles;\r\n      let index = fileList.findIndex(fileItem => {\r\n        return fileItem.uid === file.uid;\r\n      });\r\n      fileList.splice(index, 1);\r\n      // 由于删除组件有动画功能，所以设置个延迟显示\r\n      setTimeout(()=>{\r\n        this.isUpload = false\r\n      },1000)\r\n    },\r\n    // 预览图片\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    // 文件超出限制的提示\r\n    handleExceed(file, fileList) {\r\n      this.$message.error(\"文件个数超出限制\");\r\n    },\r\n    upload() {\r\n      // const formData = new FormData();\r\n      // const file = this.$refs.uploadImg.$refs.upload.uploadFiles;\r\n      // const headerConfig = {\r\n      //   headers: { \"Content-Type\": \"multipart/form-data\" }\r\n      // };\r\n      // file.forEach(item => {\r\n      //   formData.append(\"file\", item.raw)\r\n      // });\r\n      // let {data:res} = await this.$http.post(\"upload/uploadTest\", formData, headerConfig);\r\n      // console.log(res,'res');\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style  scoped>\r\n/* // 设置上传为none，可以加个动画什么之类的 */\r\n::v-deep .hide .el-upload--picture-card {\r\n  display: none;\r\n}\r\n</style>"]}]}