{"remainingRequest":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\views\\admin\\Field\\Special_field.vue?vue&type=style&index=0&id=40fd0a75&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\views\\admin\\Field\\Special_field.vue","mtime":1648833403525},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5kaXYgL2RlZXAvLmVsLWRpYWxvZyB7DQogIHdpZHRoOiA2MjBweCAhaW1wb3J0YW50Ow0KICAvKiB0ZXh0LWFsaWduOiBjZW50ZXI7ICovDQp9DQo="},{"version":3,"sources":["Special_field.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsYA;AACA;AACA;AACA","file":"Special_field.vue","sourceRoot":"src/views/admin/Field","sourcesContent":["<template>\r\n  <div class=\"div\">\r\n    <el-card>\r\n      <div slot=\"header\">\r\n        <el-button\r\n          type=\"primary\"\r\n          style=\"margin-left: 100px\"\r\n          @click=\"\r\n            isShow = true;\r\n            newAdd = true;\r\n          \"\r\n          >+ 新建</el-button\r\n        >\r\n        <el-radio-group\r\n          v-model=\"select\"\r\n          @change=\"change\"\r\n          style=\"margin-left: 100px\"\r\n        >\r\n          <el-radio-button label=\"学校课程\">学校课程</el-radio-button>\r\n          <el-radio-button label=\"比赛训练\">比赛训练</el-radio-button>\r\n        </el-radio-group>\r\n      </div>\r\n      <div>\r\n        <el-table :data=\"showList\" style=\"width: 100%\">\r\n          <el-table-column type=\"index\" label=\"序号\" width=\"width\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"use_type\"\r\n            label=\"使用性质\"\r\n            width=\"width\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"type\"\r\n            label=\"场地类别\"\r\n            width=\"width\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"position\"\r\n            label=\"场地位置\"\r\n            width=\"width\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"class\"\r\n            label=\"每周使用日期\"\r\n            width=\"width\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"period\"\r\n            label=\"使用时段\"\r\n            width=\"width\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"use_class\"\r\n            label=\"使用单位\"\r\n            width=\"width\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"prop\"\r\n            label=\"操作\"\r\n            width=\"width\"\r\n            align=\"center\"\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <el-button type=\"warning\" @click=\"edit(row)\">修改</el-button>\r\n              <el-button type=\"danger\" @click=\"deletes(row)\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      <pagination\r\n        :currentPage=\"currentPage\"\r\n        :total=\"total\"\r\n        :limit=\"limit\"\r\n        :page-sizes='pageSizes'\r\n        @handleCurrentChange=\"handleCurrentChange\"\r\n        @handleSizeChange=\"handleSizeChange\"\r\n      />\r\n    </el-card>\r\n\r\n    <el-dialog\r\n      :title=\"newList.use_type == '' ? '新增' : '修改'\"\r\n      :visible.sync=\"isShow\"\r\n      class=\"dialog\"\r\n      width=\"width\"\r\n    >\r\n      <el-form\r\n        ref=\"form\"\r\n        :rules=\"rules\"\r\n        :model=\"newList\"\r\n        label-width=\"120px\"\r\n        style=\"margin-left: 110px\"\r\n      >\r\n        <el-form-item label=\"使用性质：\" prop=\"use_type\">\r\n          <el-select v-model=\"newList.use_type\" placeholder=\"请选择使用属性\">\r\n            <el-option label=\"学校课程\" value=\"学校课程\"></el-option>\r\n            <el-option label=\"比赛训练\" value=\"比赛训练\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"场地类别：\" prop=\"tid\">\r\n          <el-select\r\n            v-model=\"newList.tid\"\r\n            @change=\"changetType\"\r\n            placeholder=\"请选择场地类别\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in venueTypeList\"\r\n              :key=\"item.tid\"\r\n              :label=\"item.type\"\r\n              :value=\"item.tid\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"场地位置：\" prop=\"pid\">\r\n          <el-select v-model=\"newList.pid\" placeholder=\"请输入选择场地\">\r\n            <el-option\r\n              v-for=\"item in positionList\"\r\n              :key=\"item.pid\"\r\n              :label=\"item.position\"\r\n              :value=\"item.pid\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"每周使用日期：\" prop=\"wid\">\r\n          <el-select v-model=\"newList.wid\" placeholder=\"请选择每周使用日期\">\r\n            <el-option\r\n              v-for=\"item in weekList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.class\"\r\n              :value=\"item.id\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"使用时段：\" prop=\"per_id\">\r\n          <el-select v-model=\"newList.per_id\" placeholder=\"请选择使用时段\">\r\n            <el-option\r\n              v-for=\"item in periodList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.period\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"使用单位：\" prop=\"use_class\">\r\n          <el-input\r\n            v-model=\"newList.use_class\"\r\n            placeholder=\"请输入使用单位\"\r\n            style=\"width: 202px\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"isShow = false\">取 消</el-button>\r\n        <el-button type=\"primary\" v-if=\"newAdd\" @click=\"submit\"\r\n          >提 交</el-button\r\n        >\r\n        <el-button type=\"primary\" v-else @click=\"updates\">保存修改</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"SpecialField\",\r\n\r\n  data() {\r\n    return {\r\n      isShow: false,\r\n      select: \"学校课程\",\r\n      venueInfo: [],\r\n      newAdd: true,\r\n      newList: {\r\n        use_type: \"\",\r\n        tid: \"\",\r\n        pid: \"\",\r\n        wid: \"\",\r\n        per_id: \"\",\r\n        use_class: \"\",\r\n      },\r\n      showList: [],\r\n      weekList: [],\r\n      periodList: [],\r\n      venueTypeList: [],\r\n      positionList: [],\r\n      tem_positionList: [],\r\n      currentPage: 1,\r\n      limit: 5,\r\n      total: 0,\r\n      pageSizes:[5,10,15,20],\r\n      rules: {\r\n        tid: [{ required: true, message: \"请选择场地类型\", trigger: \"blur\" }],\r\n        use_type: [\r\n          { required: true, message: \"请选择场地类型\", trigger: \"blur\" },\r\n        ],\r\n        pid: [{ required: true, message: \"请选择场地类型\", trigger: \"blur\" }],\r\n        wid: [{ required: true, message: \"请选择场地类型\", trigger: \"blur\" }],\r\n        per_id: [\r\n          { required: true, message: \"请选择场地类型\", trigger: \"blur\" },\r\n        ],\r\n        use_class: [\r\n          { required: true, message: \"请选择场地类型\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.getAllAboutSpecialVenueInfo();\r\n  },\r\n\r\n  methods: {\r\n    async getAllAboutSpecialVenueInfo() {\r\n      let result = await this.$store.dispatch(\"getSpecialVenueInfo\");\r\n      let results = await this.$store.dispatch(\"getWeekAndPeriod\");\r\n      if (result.code == 200 && results.code == 200) {\r\n        this.venueInfo = result.data;\r\n        this.showList = [];\r\n        let temarr = [];\r\n        this.venueInfo.forEach((item) => {\r\n          if (item.use_type == this.select) {\r\n            temarr.push(item);\r\n          }\r\n        });\r\n        this.showList = temarr.slice(\r\n          (this.currentPage - 1) * this.limit,\r\n          this.limit * this.currentPage\r\n        );\r\n        this.total = temarr.length;\r\n        // console.log(results.data)\r\n        this.weekList = results.data[0];\r\n        this.periodList = results.data[1];\r\n      } else {\r\n        this.$message.error(\"数据获取失败\");\r\n      }\r\n      this.result1 = await this.$store.dispatch(\"getAboutVenInfo\");\r\n      this.venueTypeList = this.result1[0];\r\n      this.positionList = this.result1[1];\r\n      this.tem_positionList = this.positionList;\r\n    },\r\n    change() {\r\n      this.showList = [];\r\n      let temArr = [];\r\n      this.currentPage = 1;\r\n      this.venueInfo.forEach((item) => {\r\n        if (item.use_type == this.select) {\r\n          temArr.push(item);\r\n        }\r\n      });\r\n      this.showList = temArr.slice(\r\n        (this.currentPage - 1) * this.limit,\r\n        this.limit * this.currentPage\r\n      );\r\n      this.total = temArr.length;\r\n    },\r\n    changetType() {\r\n      this.positionList = [];\r\n      this.newList.pid = \"\";\r\n      this.tem_positionList.forEach((item) => {\r\n        if (item.tid == this.newList.tid) {\r\n          this.positionList.push(item);\r\n        }\r\n      });\r\n    },\r\n    submit() {\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          this.$comfirm(\"确认提交？\", \"提示\", {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"warning\",\r\n          }).then(async () => {\r\n            // console.log(this.newList)\r\n            let result = await this.$store.dispatch(\r\n              \"addSpecialVenue\",\r\n              this.newList\r\n            );\r\n            if (result.code == 200) {\r\n              this.$notify.success({ title: \"添加成功\" });\r\n              this.isShow = false;\r\n              this.getAllAboutSpecialVenueInfo();\r\n              // console.log(this.venueInfo)\r\n            } else {\r\n              this.$message({\r\n                message: result.message,\r\n                type: \"error\",\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    // 删除\r\n    async deletes(row) {\r\n      this.$comfirm(\"请确认删除该条数据\", \"提示\", {\r\n        confirmButtonText: \"确认\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(async () => {\r\n        let result = await this.$store.dispatch(\"deleteSpeciaVenueInfo\", {\r\n          id: row.id,\r\n        });\r\n        if (result.code == 200) {\r\n          this.$notify({\r\n            title: \"成功\",\r\n            message: \"数据删除成功\",\r\n            type: \"success\",\r\n          });\r\n          this.getAllAboutSpecialVenueInfo();\r\n        } else {\r\n          this.$message.error(result.message);\r\n        }\r\n      });\r\n    },\r\n    // 修改\r\n    edit(row) {\r\n      this.isShow = true;\r\n      this.newAdd = false;\r\n      this.newList = row;\r\n    },\r\n    updates() {\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          this.$confirm(\"请确认保存修改?\", \"提示\", {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"warning\",\r\n          })\r\n            .then(async () => {\r\n              let result = await this.$store.dispatch(\r\n                \"updateSpeciaVenueInfo\",\r\n                this.newList\r\n              );\r\n              if (result.code == 200) {\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"更新成功!\",\r\n                });\r\n                this.getAllAboutSpecialVenueInfo();\r\n                this.isShow = false;\r\n                this.newAdd = true;\r\n              } else {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: result.message,\r\n                });\r\n                this.isShow = false;\r\n                this.newAdd = true;\r\n              }\r\n            })\r\n            .catch(() => {\r\n              this.$message({\r\n                type: \"info\",\r\n                message: \"已取消修改\",\r\n              });\r\n            });\r\n        }\r\n      });\r\n    },\r\n    // 分页器\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val;\r\n      this.getAllAboutSpecialVenueInfo();\r\n      // this.change();\r\n    },\r\n    handleSizeChange(val) {\r\n      this.limit = val;\r\n      this.currentPage = 1;\r\n      // this.getAllAboutSpecialVenueInfo()\r\n      this.change();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.div /deep/.el-dialog {\r\n  width: 620px !important;\r\n  /* text-align: center; */\r\n}\r\n</style>\r\n"]}]}