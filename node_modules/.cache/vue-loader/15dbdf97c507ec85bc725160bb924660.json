{"remainingRequest":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\views\\admin\\users\\Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\views\\admin\\users\\Users.vue","mtime":1647260891620},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdVc2VycycsDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXNlcnNMaXN0OltdLA0KICAgICAgdXNlcmluZm86e3JvbGU6Jycsc3RhdHVzOicnfSwNCiAgICAgIHNlYXJjaDonJywNCiAgICAgIGlzU2hvdzpmYWxzZQ0KICAgIH0NCiAgfSwNCg0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuZ2V0QWxsVXNlcnMoKQ0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICAvLyDojrflj5bmiYDmnInnmoTnlKjmiLcNCiAgICBhc3luYyBnZXRBbGxVc2Vycygpew0KICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRBbGxVc2VycycpDQogICAgICBpZihyZXN1bHRzLmNvZGUgPT0gMjAwICl7DQogICAgICAgIHRoaXMudXNlcnNMaXN0ID0gcmVzdWx0cy5kYXRhDQogICAgICB9ZWxzZXsNCiAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHt0aXRsZTon6I635Y+W5pWw5o2u5aSx6LSlJ30pDQogICAgICB9DQogICAgfSwNCg0KICAgIC8vIOe8lui+kQ0KICAgIGVkaXQocm93KXsNCiAgICAgIHRoaXMuaXNTaG93ID0gdHJ1ZQ0KICAgICAgdGhpcy51c2VyaW5mbyA9IHJvdw0KICAgICAgdGhpcy51c2VyaW5mby5yb2xlID0gcm93LnJvbGUNCiAgICAgIHRoaXMudXNlcmluZm8uc3RhdHVzID0gcm93LnN0YXR1cw0KICAgICAgY29uc29sZS5sb2codGhpcy51c2VyaW5mbykNCiAgICAgIGNvbnNvbGUubG9nKHJvdykNCiAgICB9LA0KDQogICAgLy8g5o+Q5Lqk5L+u5pS5DQogICAgYXN5bmMgc3VibWl0KCl7DQogICAgICBsZXQgcGFyYW1zID0gW3RoaXMudXNlcmluZm8udWlkLHRoaXMudXNlcmluZm8ucm9sZSx0aGlzLnVzZXJpbmZvLnN0YXR1c10NCiAgICAgIGNvbnNvbGUubG9nKHBhcmFtcykNCiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1cGRhdGVSb2xlQW5kU3RhdHVzJyxwYXJhbXMpDQogICAgICBpZihyZXN1bHQuY29kZSA9PSAyMDApew0KICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7dGl0bGU6J+abtOaWsOaIkOWKnyd9KQ0KICAgICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlDQogICAgICB9ZWxzZXsNCiAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHt0aXRsZTon5pu05paw5aSx6LSlJ30pDQogICAgICB9DQogICAgfSwNCg0KICAgIGxvZ29mZihyb3cpew0KDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA","file":"Users.vue","sourceRoot":"src/views/admin/users","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"header\">\r\n      <el-input v-model=\"search\" placeholder=\"请输入关键字\" style=\"width:200px;margin:30px 100px 20px\"></el-input>\r\n      <el-button type=\"primary\">搜索</el-button>\r\n    </div>\r\n    <hr>\r\n    <div class=\"container\">\r\n      <el-table :data=\"usersList\" style=\"width: 100%\" align=\"center\">\r\n        <el-table-column prop=\"name\" label=\"用户ID\" width=\"width\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"username\" label=\"用户名\" width=\"width\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"xuehao\" label=\"学号\" width=\"width\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"sex\" label=\"性别\" width=\"width\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"email\" label=\"邮箱\" width=\"width\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"phone\" label=\"联系电话\" width=\"width\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"role\" label=\"用户角色\" width=\"width\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n          <el-tag type=\"info\" v-if=\"scope.row.role == 1\" >用户</el-tag>\r\n          <el-tag type=\"danger\" v-if=\"scope.row.role == 2\" >管理员</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"status\" label=\"账号状态\" width=\"width\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag type=\"success\" v-if=\"scope.row.status == 1\" >正常</el-tag>\r\n            <el-tag type=\"warning\" v-if=\"scope.row.status == 2\">失信</el-tag>\r\n            <el-tag type=\"danger\" v-if=\"scope.row.status == 3\">注销</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"prop\" label=\"操作\" width=\"250\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"warning\" icon=\"el-icon-edit\" size=\"mini\" @click=\"edit(scope.row)\">修 改</el-button>\r\n            <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"logoff(scope.row)\">注 销</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n    <!-- 修改 -->\r\n    <el-dialog title=\"用户信息更新\" :visible.sync=\"isShow\" width=\"width\">\r\n      <div style=\"width:350px; margin:0px auto\">\r\n        <el-form ref=\"form\" :model=\"userinfo\" label-width=\"100px\" >\r\n          <el-form-item label=\"用户ID：\">\r\n          <span style=\"font-size:16px;font-weight:700;\"> {{userinfo.name}} </span>\r\n          </el-form-item>\r\n          <el-form-item label=\"用户姓名：\">\r\n            <span style=\"font-size:16px;font-weight:700;\"> {{userinfo.username}} </span>\r\n          </el-form-item>\r\n          <el-form-item label=\"学  号：\">\r\n            <span style=\"font-size:16px;font-weight:700;\"> {{userinfo.xuehao}} </span>\r\n            \r\n          </el-form-item>\r\n          <el-form-item label=\"性  别：\">\r\n            <span style=\"font-size:16px;font-weight:700;\"> {{userinfo.sex}} </span>\r\n            \r\n          </el-form-item>\r\n          <el-form-item label=\"邮  箱：\">\r\n            <span style=\"font-size:16px;font-weight:700;\"> {{userinfo.email}} </span>\r\n          \r\n          </el-form-item>\r\n          <el-form-item label=\"联系电话：\">\r\n            <span style=\"font-size:16px;font-weight:700;\"> {{userinfo.phone}} </span>\r\n            \r\n          </el-form-item>\r\n          <el-form-item label=\"用户角色：\">\r\n            <el-radio-group v-model=\"userinfo.role\">\r\n              <el-radio :label=\"1\">用户</el-radio>\r\n              <el-radio :label=\"2\">管理员</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"账号状态：\">\r\n            <el-radio-group v-model=\"userinfo.status\">\r\n              <el-radio :label=\"1\">正常</el-radio>\r\n              <el-radio :label=\"2\">异常</el-radio>\r\n              <el-radio :label=\"3\">已注销</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <div slot=\"footer\" style=\"text-align:center\">\r\n        <el-button style=\"margin:0px 25px\" @click=\"isShow = false\">取 消</el-button>\r\n        <el-button style=\"margin:0px 25px\" type=\"primary\" @click=\"submit\">提交修改</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Users',\r\n\r\n  data() {\r\n    return {\r\n      usersList:[],\r\n      userinfo:{role:'',status:''},\r\n      search:'',\r\n      isShow:false\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.getAllUsers()\r\n  },\r\n\r\n  methods: {\r\n    // 获取所有的用户\r\n    async getAllUsers(){\r\n      const results = await this.$store.dispatch('getAllUsers')\r\n      if(results.code == 200 ){\r\n        this.usersList = results.data\r\n      }else{\r\n        this.$notify.error({title:'获取数据失败'})\r\n      }\r\n    },\r\n\r\n    // 编辑\r\n    edit(row){\r\n      this.isShow = true\r\n      this.userinfo = row\r\n      this.userinfo.role = row.role\r\n      this.userinfo.status = row.status\r\n      console.log(this.userinfo)\r\n      console.log(row)\r\n    },\r\n\r\n    // 提交修改\r\n    async submit(){\r\n      let params = [this.userinfo.uid,this.userinfo.role,this.userinfo.status]\r\n      console.log(params)\r\n      const result = await this.$store.dispatch('updateRoleAndStatus',params)\r\n      if(result.code == 200){\r\n        this.$notify.success({title:'更新成功'})\r\n        this.isShow = false\r\n      }else{\r\n        this.$notify.error({title:'更新失败'})\r\n      }\r\n    },\r\n\r\n    logoff(row){\r\n\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.input{\r\n  width: 180px;\r\n}\r\n</style>\r\n"]}]}