{"remainingRequest":"C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\src\\components\\upload\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\src\\components\\upload\\index.vue","mtime":1648877267576},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\babel.config.js","mtime":1637306514000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地系统\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXBsb2FkIiwKICBwcm9wczogewogICAgYWNjZXB0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogImltYWdlLyoiCiAgICB9LAogICAgbGltaXQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA1CiAgICB9LAogICAgbmFtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJmaWxlIgogICAgfSwKICAgIGF1dG9VcGxvYWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBmaWxlTGlzdDogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nSW1hZ2VVcmw6ICIiLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICBpc1VwbG9hZDogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShmaWxlLCBmaWxlTGlzdCkgewogICAgICAvLyDliKTmlq3kuIrkvKDmlofku7bmmK/lkKbovr7liLDpmZDliLYKICAgICAgdGhpcy5pc1VwbG9hZCA9IGZpbGVMaXN0Lmxlbmd0aCA+PSB0aGlzLmxpbWl0OyAvLyDnlLHkuo7orr7nva7oh6rliqjkuIrkvKDkuLpmYWxzZSxiZWZvcmUtdXBsb2Fk6ZKp5a2Q5aSx5pWI77yM5omA5Lul5Zyob24tY2hhbmdl5Lit5qOA6aqM5paH5Lu25piv5ZCm56ym5ZCI6KaB5rGCCgogICAgICB2YXIgaXNKUEcgPSB+WyJpbWFnZS9qcGVnIiwgImltYWdlL3BuZyJdLmluZGV4T2YoZmlsZS5yYXcudHlwZSk7CiAgICAgIHZhciBpc0x0Mk0gPSBmaWxlLnJhdy5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwoKICAgICAgaWYgKCFpc0pQRykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4iuS8oOWbvueJh+WPquiDveaYryBqcGcg5qC85byPISIpOwogICAgICB9CgogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4iuS8oOWktOWDj+WbvueJh+Wkp+Wwj+S4jeiDvei2hei/hyAyTUIhIik7CiAgICAgIH0KCiAgICAgIGlmICghaXNKUEcgfHwgIWlzTHQyTSkgewogICAgICAgIC8vIOS4jeespuWQiOebtOaOpeWIoOmZpOivpeaWh+S7tgogICAgICAgIHRoaXMuaGFuZGxlUmVtb3ZlKGZpbGUpOwogICAgICB9CiAgICB9LAogICAgLy8g5Yig6Zmk5Zu+54mHCiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShmaWxlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZmlsZUxpc3QgPSB0aGlzLiRyZWZzLnVwbG9hZC51cGxvYWRGaWxlczsKICAgICAgdmFyIGluZGV4ID0gZmlsZUxpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChmaWxlSXRlbSkgewogICAgICAgIHJldHVybiBmaWxlSXRlbS51aWQgPT09IGZpbGUudWlkOwogICAgICB9KTsKICAgICAgZmlsZUxpc3Quc3BsaWNlKGluZGV4LCAxKTsgLy8g55Sx5LqO5Yig6Zmk57uE5Lu25pyJ5Yqo55S75Yqf6IO977yM5omA5Lul6K6+572u5Liq5bu26L+f5pi+56S6CgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5pc1VwbG9hZCA9IGZhbHNlOwogICAgICB9LCAxMDAwKTsKICAgIH0sCiAgICAvLyDpooTop4jlm77niYcKICAgIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldzogZnVuY3Rpb24gaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8vIOaWh+S7tui2heWHuumZkOWItueahOaPkOekugogICAgaGFuZGxlRXhjZWVkOiBmdW5jdGlvbiBoYW5kbGVFeGNlZWQoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH5Lu25Liq5pWw6LaF5Ye66ZmQ5Yi2Iik7CiAgICB9LAogICAgdXBsb2FkOiBmdW5jdGlvbiB1cGxvYWQoKSB7Ly8gY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgLy8gY29uc3QgZmlsZSA9IHRoaXMuJHJlZnMudXBsb2FkSW1nLiRyZWZzLnVwbG9hZC51cGxvYWRGaWxlczsKICAgICAgLy8gY29uc3QgaGVhZGVyQ29uZmlnID0gewogICAgICAvLyAgIGhlYWRlcnM6IHsgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIiB9CiAgICAgIC8vIH07CiAgICAgIC8vIGZpbGUuZm9yRWFjaChpdGVtID0+IHsKICAgICAgLy8gICBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLCBpdGVtLnJhdykKICAgICAgLy8gfSk7CiAgICAgIC8vIGxldCB7ZGF0YTpyZXN9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCJ1cGxvYWQvdXBsb2FkVGVzdCIsIGZvcm1EYXRhLCBoZWFkZXJDb25maWcpOwogICAgICAvLyBjb25zb2xlLmxvZyhyZXMsJ3JlcycpOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACAA,gBADA;AAEAC;AACAC;AACAC,kBADA;AAEAC;AAFA,KADA;AAKAC;AACAF,kBADA;AAEAC;AAFA,KALA;AASAJ;AACAG,kBADA;AAEAC;AAFA,KATA;AAaAE;AACAH,mBADA;AAEAC;AAFA,KAbA;AAiBAG;AACAJ,iBADA;AAEAC,aAFA,sBAEA;AACA;AACA;AAJA;AAjBA,GAFA;AA0BAI,MA1BA,kBA0BA;AACA;AACAC,wBADA;AAEAC,0BAFA;AAGAC,qBAHA;AAIAC;AAJA;AAMA,GAjCA;AAkCAC;AACAC,gBADA,wBACAC,IADA,EACAR,QADA,EACA;AACA;AACA,oDAFA,CAGA;;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA,KAjBA;AAkBA;AACAS,gBAnBA,wBAmBAD,IAnBA,EAmBA;AAAA;;AACA;AACA;AACA;AACA,OAFA;AAGAR,gCALA,CAMA;;AACAU;AACA;AACA,OAFA,EAEA,IAFA;AAGA,KA7BA;AA8BA;AACAC,4BA/BA,oCA+BAH,IA/BA,EA+BA;AACA;AACA;AACA,KAlCA;AAmCA;AACAI,gBApCA,wBAoCAJ,IApCA,EAoCAR,QApCA,EAoCA;AACA;AACA,KAtCA;AAuCAa,UAvCA,oBAuCA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlDA;AAlCA","names":["name","props","accept","type","default","limit","autoUpload","fileList","data","dialogImageUrl","dialogVisible","disabled","isUpload","methods","handleChange","file","handleRemove","setTimeout","handlePictureCardPreview","handleExceed","upload"],"sourceRoot":"src/components/upload","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"upload\">\r\n    <el-upload\r\n      action=\"\"\r\n      :class=\"{hide:isUpload}\"\r\n      :auto-upload=\"autoUpload\"\r\n      :http-request=\"upload\"\r\n      list-type=\"picture-card\"\r\n      multiple\r\n      :limit=\"limit\"\r\n      :file-list=\"fileList\"\r\n      :accept=\"accept\"\r\n      ref=\"upload\"\r\n      :name=\"name\"\r\n      :on-change=\"handleChange\"\r\n      :on-exceed=\"handleExceed\"\r\n    >\r\n      <i slot=\"default\" class=\"el-icon-plus\"></i>\r\n      <div slot=\"file\" slot-scope=\"{ file }\">\r\n        <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\" />\r\n        <span class=\"el-upload-list__item-actions\">\r\n          <span\r\n            class=\"el-upload-list__item-preview\"\r\n            @click=\"handlePictureCardPreview(file)\"\r\n          >\r\n            <i class=\"el-icon-zoom-in\"></i>\r\n          </span>\r\n          <span\r\n            v-if=\"!disabled\"\r\n            class=\"el-upload-list__item-delete\"\r\n            @click=\"handleRemove(file)\"\r\n          >\r\n            <i class=\"el-icon-delete\"></i>\r\n          </span>\r\n        </span>\r\n      </div>\r\n    </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\">\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Upload\",\r\n  props: {\r\n    accept: {\r\n      type: String,\r\n      default: \"image/*\"\r\n    },\r\n    limit: {\r\n      type: Number,\r\n      default: 5\r\n    },\r\n    name: {\r\n      type: String,\r\n      default: \"file\"\r\n    },\r\n    autoUpload: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    fileList: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      dialogImageUrl: \"\",\r\n      dialogVisible: false,\r\n      disabled: false,\r\n      isUpload: false,\r\n    };\r\n  },\r\n  methods: {\r\n    handleChange(file, fileList) {\r\n      // 判断上传文件是否达到限制\r\n      this.isUpload = fileList.length >= this.limit\r\n      // 由于设置自动上传为false,before-upload钩子失效，所以在on-change中检验文件是否符合要求\r\n      const isJPG = ~[\"image/jpeg\", \"image/png\"].indexOf(file.raw.type);\r\n      const isLt2M = file.raw.size / 1024 / 1024 < 2;\r\n      if (!isJPG) {\r\n        this.$message.error(\"上传图片只能是 jpg 格式!\")\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\")\r\n      } \r\n      if(!isJPG || !isLt2M){\r\n      // 不符合直接删除该文件\r\n        this.handleRemove(file)\r\n      }\r\n    },\r\n    // 删除图片\r\n    handleRemove(file) {\r\n      let fileList = this.$refs.upload.uploadFiles;\r\n      let index = fileList.findIndex(fileItem => {\r\n        return fileItem.uid === file.uid;\r\n      });\r\n      fileList.splice(index, 1);\r\n      // 由于删除组件有动画功能，所以设置个延迟显示\r\n      setTimeout(()=>{\r\n        this.isUpload = false\r\n      },1000)\r\n    },\r\n    // 预览图片\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    // 文件超出限制的提示\r\n    handleExceed(file, fileList) {\r\n      this.$message.error(\"文件个数超出限制\");\r\n    },\r\n    upload() {\r\n      // const formData = new FormData();\r\n      // const file = this.$refs.uploadImg.$refs.upload.uploadFiles;\r\n      // const headerConfig = {\r\n      //   headers: { \"Content-Type\": \"multipart/form-data\" }\r\n      // };\r\n      // file.forEach(item => {\r\n      //   formData.append(\"file\", item.raw)\r\n      // });\r\n      // let {data:res} = await this.$http.post(\"upload/uploadTest\", formData, headerConfig);\r\n      // console.log(res,'res');\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style  scoped>\r\n/* // 设置上传为none，可以加个动画什么之类的 */\r\n::v-deep .hide .el-upload--picture-card {\r\n  display: none;\r\n}\r\n</style>"]}]}