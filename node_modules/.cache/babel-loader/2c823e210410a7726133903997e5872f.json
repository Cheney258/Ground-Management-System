{"remainingRequest":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\store\\modules\\user.js","mtime":1646120802848},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\babel.config.js","mtime":1637306514000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7Ci8vIGltcG9ydCB7ICBsb2dvdXQgfSBmcm9tICdAL2FwaS91c2VyJwppbXBvcnQgeyBsb2dpbiBhcyBfbG9naW4sIGdldEluZm8gYXMgX2dldEluZm8gfSBmcm9tICdAL2FwaSc7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgeyByZXNldFJvdXRlciB9IGZyb20gJ0Avcm91dGVyJzsKCnZhciBnZXREZWZhdWx0U3RhdGUgPSBmdW5jdGlvbiBnZXREZWZhdWx0U3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHRva2VuOiBnZXRUb2tlbigpLAogICAgbmFtZTogJycsCiAgICBhdmF0YXI6ICdodHRwczovL3dwaW1nLndhbGxzdGNuLmNvbS9mNzc4NzM4Yy1lNGY4LTQ4NzAtYjYzNC01NjcwM2I0YWNhZmUuZ2lmJwogIH07Cn07Cgp2YXIgc3RhdGUgPSBnZXREZWZhdWx0U3RhdGUoKTsKdmFyIG11dGF0aW9ucyA9IHsKICBSRVNFVF9TVEFURTogZnVuY3Rpb24gUkVTRVRfU1RBVEUoc3RhdGUpIHsKICAgIE9iamVjdC5hc3NpZ24oc3RhdGUsIGdldERlZmF1bHRTdGF0ZSgpKTsKICB9LAogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgdXNlcm5hbWUpIHsKICAgIHN0YXRlLm5hbWUgPSB1c2VybmFtZTsKICB9IC8vIFNFVF9BVkFUQVI6IChzdGF0ZSwgYXZhdGFyKSA9PiB7CiAgLy8gICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXIKICAvLyB9Cgp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyB1c2VyIGxvZ2luCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXJJbmZvKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHZhciB1c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQsCiAgICAgICAgcm9sZSA9IHVzZXJJbmZvLnJvbGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfbG9naW4oewogICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZS50cmltKCksCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLAogICAgICAgIHJvbGU6IHJvbGUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tZXNzYWdlLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgfSk7CgogICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgcmVzcG9uc2UudG9rZW4pOwogICAgICAgIHNldFRva2VuKHJlc3BvbnNlLnRva2VuKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyBnZXQgdXNlciBpbmZvCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2dldEluZm8oc3RhdGUudG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgIHJldHVybiByZWplY3QoJ1ZlcmlmaWNhdGlvbiBmYWlsZWQsIHBsZWFzZSBMb2dpbiBhZ2Fpbi4nKTsKICAgICAgICB9CgogICAgICAgIHZhciB1c2VybmFtZSA9IGRhdGEudV9uYW1lOwogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCB1c2VybmFtZSk7IC8vIGNvbW1pdCgnU0VUX0FWQVRBUicsIGF2YXRhcikgLy/lpLTlg48KCiAgICAgICAgcmVzb2x2ZShkYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHVzZXIgbG9nb3V0CiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKCiAgICAgIHJlc2V0Um91dGVyKCk7CiAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfSwKICAvLyByZW1vdmUgdG9rZW4KICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKCiAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["C:/Users/22419/Desktop/校园运动场地管理系统/app/src/store/modules/user.js"],"names":["login","getInfo","getToken","setToken","removeToken","resetRouter","getDefaultState","token","name","avatar","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","username","actions","userInfo","commit","password","role","Promise","resolve","reject","trim","then","response","$message","message","type","catch","error","data","u_name","logout","resetToken","namespaced"],"mappings":"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","sourcesContent":["// import {  logout } from '@/api/user'\nimport { login, getInfo } from '@/api'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { resetRouter } from '@/router'\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    avatar: 'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif',\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, username) => {\n    state.name = username\n  },\n  // SET_AVATAR: (state, avatar) => {\n  //   state.avatar = avatar\n  // }\n}\n\nconst actions = {\n  // user login\n  login({ commit }, userInfo) {\n    const { username, password, role } = userInfo\n    return new Promise((resolve, reject) => {\n      login({ username: username.trim(), password: password, role:role }).then(response => {\n        this.$message({\n          message:response.message,\n          type: 'success'\n        })\n        commit('SET_TOKEN', response.token)\n        setToken(response.token)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        // console.log(response)\n        const data  = response.data\n\n        if (!data) {\n          return reject('Verification failed, please Login again.')\n        }\n\n        const username = data.u_name\n\n        commit('SET_NAME', username)\n        // commit('SET_AVATAR', avatar) //头像\n        resolve(data)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      \n        removeToken() // must remove  token  first\n        resetRouter()\n        commit('RESET_STATE')\n        resolve()\n      \n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      resolve()\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n"]}]}