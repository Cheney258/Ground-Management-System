{"remainingRequest":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\store\\modules\\user\\user.js","dependencies":[{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\src\\store\\modules\\user\\user.js","mtime":1647240329161},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\babel.config.js","mtime":1637306514000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\22419\\Desktop\\校园运动场地管理系统\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzLzIyNDE5L0Rlc2t0b3AvXHU2ODIxXHU1NkVEXHU4RkQwXHU1MkE4XHU1NzNBXHU1NzMwXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7Ci8vIGltcG9ydCB7ICBsb2dvdXQgfSBmcm9tICdAL2FwaS91c2VyJwppbXBvcnQgeyBsb2dpbiBhcyBfbG9naW4sIGdldEluZm8gYXMgX2dldEluZm8sIHJlcVVwZGF0ZUluZm8sIHJlcUdldEFubm91bmNlbWVudCB9IGZyb20gJ0AvYXBpJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwoKdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAnJywKICAgIHJvbGVzOiBbXSwKICAgIGF2YXRhcjogJ2h0dHBzOi8vd3BpbWcud2FsbHN0Y24uY29tL2Y3Nzg3MzhjLWU0ZjgtNDg3MC1iNjM0LTU2NzAzYjRhY2FmZS5naWYnCiAgfTsKfTsKCnZhciBzdGF0ZSA9IGdldERlZmF1bHRTdGF0ZSgpOwp2YXIgbXV0YXRpb25zID0gewogIFJFU0VUX1NUQVRFOiBmdW5jdGlvbiBSRVNFVF9TVEFURShzdGF0ZSkgewogICAgT2JqZWN0LmFzc2lnbihzdGF0ZSwgZ2V0RGVmYXVsdFN0YXRlKCkpOwogIH0sCiAgU0VUX1VJRDogZnVuY3Rpb24gU0VUX1VJRChzdGF0ZSwgdWlkKSB7CiAgICBzdGF0ZS51aWQgPSB1aWQ7CiAgfSwKICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgfSwKICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIHVzZXJuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gdXNlcm5hbWU7CiAgfSwKICBTRVRfSU5GTzogZnVuY3Rpb24gU0VUX0lORk8oc3RhdGUsIHVzZXJJbmZvKSB7CiAgICBzdGF0ZS51c2VySW5mbyA9IHVzZXJJbmZvOwogIH0sCiAgU0VUX01ZQVBQTFk6IGZ1bmN0aW9uIFNFVF9NWUFQUExZKHN0YXRlLCBteWFwcGx5KSB7CiAgICBzdGF0ZS5teWFwcGx5ID0gbXlhcHBseTsKICB9LAogIFNFVF9ST0xFUzogZnVuY3Rpb24gU0VUX1JPTEVTKHN0YXRlLCByb2xlcykgewogICAgc3RhdGUucm9sZXMgPSByb2xlczsKICB9LAogIFNFVF9DUkVESVQ6IGZ1bmN0aW9uIFNFVF9DUkVESVQoc3RhdGUsIGNyZWRpdCkgewogICAgc3RhdGUuY3JlZGl0ID0gY3JlZGl0OwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgLy8gdXNlciBsb2dpbgogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNvbW1pdCwgc3RhdGUsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0LCBzdGF0ZSA9IF9yZWYuc3RhdGU7CiAgICAgICAgICAgICAgdXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZSwgcGFzc3dvcmQgPSB1c2VySW5mby5wYXNzd29yZCwgcm9sZSA9IHVzZXJJbmZvLnJvbGU7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgIF9sb2dpbih7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZS50cmltKCksCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgICAgICAgICAgICAgICAgcm9sZTogcm9sZQogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCByZXNwb25zZS50b2tlbik7CiAgICAgICAgICAgICAgICAgIHNldFRva2VuKHJlc3BvbnNlLnRva2VuKTsKICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIC8vIGdldCB1c2VyIGluZm8KICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfZ2V0SW5mbyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7IC8vIGNvbnNvbGUubG9nKGRhdGEpCgogICAgICAgIGlmICghZGF0YSkgewogICAgICAgICAgcmV0dXJuIHJlamVjdCgnVmVyaWZpY2F0aW9uIGZhaWxlZCwgcGxlYXNlIExvZ2luIGFnYWluLicpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHVzZXJuYW1lID0gZGF0YS5uYW1lOwogICAgICAgIGNvbW1pdCgnU0VUX0lORk8nLCBkYXRhKTsKICAgICAgICBjb21taXQoJ1NFVF9OQU1FJywgdXNlcm5hbWUpOwogICAgICAgIGNvbW1pdCgnU0VUX0NSRURJVCcsIGRhdGEuY3JlZGl0KTsKICAgICAgICB2YXIgcm9sZXMgPSBbXTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudWlkID09IDEpIHsKICAgICAgICAgIHJvbGVzLnB1c2goJ2VkaXRvcicpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByb2xlcy5wdXNoKCdhZG1pbicpOwogICAgICAgIH0KCiAgICAgICAgY29tbWl0KCdTRVRfVUlEJywgcmVzcG9uc2UuZGF0YS51aWQpOwogICAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgcm9sZXMpOwogICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyDojrflj5blhazlkYoKICBnZXRBbm5vdW5jZW1lbnQ6IGZ1bmN0aW9uIGdldEFubm91bmNlbWVudChfcmVmMykgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBjb21taXQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgcmVxR2V0QW5ub3VuY2VtZW50KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyLnNlbnQpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfSwKICAvLyDkuKrkurrkv6Hmga/mm7TmlrAKICB1cGRhdGVJbmZvOiBmdW5jdGlvbiB1cGRhdGVJbmZvKF9yZWY0LCB1c2VySW5mbykgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciBjb21taXQsIHJlc3VsdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByZXFVcGRhdGVJbmZvKHVzZXJJbmZvKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgaWYgKCEocmVzdWx0LmNvZGUgPT0gMjAwKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSgpOwogIH0sCiAgLy8gdXNlciBsb2dvdXQKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmNSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWY1LnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgICAgcmVzZXRSb3V0ZXIoKTsKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjYpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNi5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["C:/Users/22419/Desktop/校园运动场地管理系统/app/src/store/modules/user/user.js"],"names":["login","getInfo","reqUpdateInfo","reqGetAnnouncement","getToken","setToken","removeToken","resetRouter","getDefaultState","token","name","roles","avatar","state","mutations","RESET_STATE","Object","assign","SET_UID","uid","SET_TOKEN","SET_NAME","username","SET_INFO","userInfo","SET_MYAPPLY","myapply","SET_ROLES","SET_CREDIT","credit","actions","commit","password","role","Promise","resolve","reject","trim","then","response","catch","error","data","push","getAnnouncement","res","err","updateInfo","result","code","logout","resetToken","namespaced"],"mappings":"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","sourcesContent":["// import {  logout } from '@/api/user'\nimport { login, getInfo, reqUpdateInfo,reqGetAnnouncement } from '@/api'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { resetRouter } from '@/router'\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    roles: [],\n    avatar: 'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif'\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_UID: (state, uid) => {\n    state.uid = uid\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, username) => {\n    state.name = username\n  },\n  SET_INFO: (state, userInfo) => {\n    state.userInfo = userInfo\n  },\n  SET_MYAPPLY: (state, myapply) => {\n    state.myapply = myapply\n  },\n  SET_ROLES: (state, roles) => {\n    state.roles = roles\n  },\n  SET_CREDIT: (state,credit) => {\n    state.credit = credit\n  }\n}\n\nconst actions = {\n  // user login\n  async login({ commit, state }, userInfo) {\n    const { username, password, role } = userInfo\n    return await new Promise((resolve, reject) => {\n      login({ username: username.trim(), password: password, role: role }).then(response => {\n        commit('SET_TOKEN', response.token)\n        setToken(response.token)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        const data = response.data\n        // console.log(data)\n        if (!data) {\n          return reject('Verification failed, please Login again.')\n        }\n        const username = data.name\n        commit('SET_INFO', data)\n        commit('SET_NAME', username)\n        commit('SET_CREDIT',data.credit)\n        const roles = []\n        if (response.data.uid == 1) {\n          roles.push('editor')\n        } else {\n          roles.push('admin')\n        }\n\n        commit('SET_UID', response.data.uid)\n        commit('SET_ROLES', roles)\n        resolve(data)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // 获取公告\n  async getAnnouncement({commit}){\n    return await new Promise((resolve,reject) => {\n      reqGetAnnouncement().then(res => {\n        resolve(res)\n      }).catch(err =>{\n        reject(err)\n      })\n    })\n  },\n\n  // 个人信息更新\n  async updateInfo({ commit }, userInfo) {\n    const result = await reqUpdateInfo(userInfo)\n    if (result.code == 200) {\n      // 更新成功的响应\n      return result\n    } else {\n      // 更新失败的响应\n      return result\n    }\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      removeToken() // must remove  token  first\n      resetRouter()\n      commit('RESET_STATE')\n      resolve()\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      resolve()\n    })\n  },\n\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n"]}]}